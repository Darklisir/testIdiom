window.__require=function i(r,t,s){function e(a,h){if(!t[a]){if(!r[a]){var c=a.split("/");if(c=c[c.length-1],!r[c]){var l="function"==typeof __require&&__require;if(!h&&l)return l(c,!0);if(o)return o(c,!0);throw new Error("Cannot find module '"+a+"'")}}var m=t[a]={exports:{}};r[a][0].call(m.exports,function(i){return e(r[a][1][i]||i)},m,m.exports,i,r,t,s)}return t[a].exports}for(var o="function"==typeof __require&&__require,a=0;a<s.length;a++)e(s[a]);return e}({BlockSpritePrefab:[function(i,r,t){"use strict";cc._RF.push(r,"25a6fB9yr5P4LNPFMY94zhc","BlockSpritePrefab"),cc.Class({extends:cc.Component,properties:{id:cc.Label,wordName:cc.Label},start:function(){},initdata:function(i){this.id.string=i.id,this.wordName.string=i.wordName},setWord:function(i){this.wordName.string=i.wordName},clickBtn:function(i,r){cc.log("\u6d4b\u8bd5\u70b9\u51fb\u3002\u3002\u3002",r)}}),cc._RF.pop()},{}],CreateIdiom:[function(i,r,t){"use strict";cc._RF.push(r,"3ba83jQJHJIBLa4ZC8Y0Wt8","CreateIdiom");r.exports={},cc._RF.pop()},{}],GameConfig:[function(i,r,t){"use strict";cc._RF.push(r,"aca97QYrStIWZqdopry66XT","GameConfig");r.exports={gameLevel:[0,1e3,3e3,5e3,8e3,1e4,15e3,2e4,25e3,3e4],blockColor:{black:{color:"#000000",coin:1e3},blue:{color:"#0000FF",coin:800},green:{color:"#00FF00",coin:500},yellow:{color:"#FFFF00",coin:250},white:{color:"#FFFFFF",coin:100},red:{color:"#FF0000",coin:50}},blockArray:{1:["black","green","white","red","white","green","black"],2:["black","blue","green","white","red","white","green","blue","black"],3:["black","blue","green","yellow","white","red","white","yellow","green","blue","black"]},toHanzi:["\u4e00","\u4e8c","\u4e09","\u56db","\u4e94","\u516d","\u4e03","\u516b","\u4e5d","\u5341"]},cc._RF.pop()},{}],GameCreatePrefab:[function(i,r,t){"use strict";cc._RF.push(r,"5b91d+t/qdLmqA5NSZx3Ohj","GameCreatePrefab"),cc.Class({extends:cc.Component,properties:{gameArea:cc.Node,blockSpritePrefab:cc.Prefab,idiomList:{default:null,type:cc.JsonAsset},idiomHeadList:{default:null,type:cc.JsonAsset},idiomLevelsList:{default:null,type:cc.JsonAsset},levelLabel:cc.Label},onLoad:function(){this.loopTimes=10,this.levelWords=6,this.createLevels=1,this.blockArray=[];for(var i=0;i<9;i++)for(var r=0;r<9;r++){var t=cc.instantiate(this.blockSpritePrefab),s=t.width,e=t.height;t.setPosition(2+2*r+(s*r+s/2),2+2*i+(e*i+e/2)),t.cl=cc.v2(r,i),this.gameArea.addChild(t),this.blockArray[[r,i]]=t,t.getComponent("BlockSpritePrefab").initdata({id:r+"."+i,wordName:""}),t.getComponent(cc.Button).clickEvents[0].customEventData=r+"."+i}cc.log("item",this.blockArray)},start:function(){this.setlevel=0,this.idiomLevelJson=this.idiomLevelsList.json,this.idiomArray=this.idiomLevelJson[this.setlevel][0],this.levelLabel.string="\u7b2c"+(this.setlevel+1)+"\u5173",this.refreshBoard()},startBuild:function(){var i=this.idiomList.json,r=this.idiomHeadList.json;this.idiomArray={},this.levelArrays=[],this.levelAr=[[],[]];for(var t=0;t<this.createLevels;t++){this.idiom=[r[t],i],this.amountIdiom=0,this.addWords=0,this.levelAr=[[],[]],this.idiomArray={},this.levelAr[1].push(this.returnHeadWord(this.idiom[0]));var s=this.idiom[0].split("");this.tempArray=[];for(var e=0;e<s.length;e++){var o=s[e];this.idiomArray[[3+e,4]]={pos:cc.v2(3+e,4),str:o,cl:"x"},this.tempArray[e]={pos:cc.v2(3+e,4),str:o,cl:"x"}}this.makeIdioms(),t==this.createLevels-1&&cc.sys.isNative&&(jsb.fileUtils.writeStringToFile(JSON.stringify(this.levelArrays),"test.json"),cc.log(this.levelArrays))}},makeIdioms:function(){i:for(var i=0;i<this.idiom[1].length;i++){for(var r=this.idiom[1][i].word,t=r.split(""),s=!1,e=this.tempArray.length,o=1;o<4;o++){for(var a=0;a<t.length;a++){var h=this.tempArray[e-o],c=t[a];if(h.str==c&&h.str==c){var l=h.pos.x,m=h.pos.y;if("x"==h.cl){if(0==a){if(this.idiomArray[[l-1,m-1]]||this.idiomArray[[l+1,m-1]]||this.idiomArray[[l-1,m-2]]||this.idiomArray[[l+1,m-2]]||this.idiomArray[[l-1,m-3]]||this.idiomArray[[l+1,m-3]]||this.idiomArray[[l,m-4]])break;var n=this.contantIs([m-1,m-2,m-3]);if(0==n);else{if(!this.isallMoves(n,"y"))break;this.setIdiomArry(n,"y")}var d=cc.v2(l,m-1-n),y=cc.v2(l,m-2-n),A=cc.v2(l,m-3-n),v={pos:d,str:t[1],cl:"y"},p={pos:y,str:t[2],cl:"y"},f={pos:A,str:t[3],cl:"y"};this.idiomArray[[d.x,d.y]]=v,this.idiomArray[[y.x,y.y]]=p,this.idiomArray[[A.x,A.y]]=f,this.tempArray=[],this.tempArray[0]=v,this.tempArray[1]=p,this.tempArray[2]=f,this.searchSuccess(i,this.tempArray,r,c),s=!0;break}if(1==a){if(this.idiomArray[[l-1,m+1]]||this.idiomArray[[l+1,m+1]]||this.idiomArray[[l-1,m-1]]||this.idiomArray[[l+1,m-1]]||this.idiomArray[[l-1,m-2]]||this.idiomArray[[l+1,m-2]]||this.idiomArray[[l,m+2]]||this.idiomArray[[l,m-3]])break;var u=this.contantIs([m+1,m-1,m-2]);if(0==u);else{if(!this.isallMoves(u,"y"))break;this.setIdiomArry(u,"y")}var b=cc.v2(l,m+1-u),k=cc.v2(l,m-1-u),x=cc.v2(l,m-2-u),g={pos:b,str:t[0],cl:"y"},L={pos:k,str:t[2],cl:"y"},C={pos:x,str:t[3],cl:"y"};this.idiomArray[[b.x,b.y]]=g,this.idiomArray[[k.x,k.y]]=L,this.idiomArray[[x.x,x.y]]=C,this.tempArray=[],this.tempArray[0]=g,this.tempArray[1]=L,this.tempArray[2]=C,this.searchSuccess(i,this.tempArray,r,c),s=!0;break}if(2==a){if(this.idiomArray[[l-1,m+1]]||this.idiomArray[[l+1,m+1]]||this.idiomArray[[l-1,m+2]]||this.idiomArray[[l+1,m+2]]||this.idiomArray[[l-1,m-1]]||this.idiomArray[[l+1,m-1]]||this.idiomArray[[l,m+3]]||this.idiomArray[[l,m-2]])break;var w=this.contantIs([m+2,m+1,m-1]);if(0==w);else{if(!this.isallMoves(w,"y"))break;this.setIdiomArry(w,"y")}var I=cc.v2(l,m+2-w),F=cc.v2(l,m+1-w),S=cc.v2(l,m-1-w),B={pos:I,str:t[0],cl:"y"},P={pos:F,str:t[1],cl:"y"},_={pos:S,str:t[3],cl:"y"};this.idiomArray[[I.x,I.y]]=B,this.idiomArray[[F.x,F.y]]=P,this.idiomArray[[S.x,S.y]]=_,this.tempArray=[],this.tempArray[0]=B,this.tempArray[1]=P,this.tempArray[2]=_,this.searchSuccess(i,this.tempArray,r,c),s=!0;break}if(3==a){if(this.idiomArray[[l-1,m+1]]||this.idiomArray[[l+1,m+1]]||this.idiomArray[[l-1,m+2]]||this.idiomArray[[l+1,m+2]]||this.idiomArray[[l-1,m+3]]||this.idiomArray[[l+1,m+3]]||this.idiomArray[[l,m+4]]||this.idiomArray[[l,m-1]])break;var N=this.contantIs([m+3,m+2,m+1]);if(0==N);else{if(!this.isallMoves(N,"y"))break;this.setIdiomArry(N,"y")}var W=cc.v2(l,m+3-N),J=cc.v2(l,m+2-N),M=cc.v2(l,m+1-N),G={pos:W,str:t[0],cl:"y"},R={pos:J,str:t[1],cl:"y"},j={pos:M,str:t[2],cl:"y"};this.idiomArray[[W.x,W.y]]=G,this.idiomArray[[J.x,J.y]]=R,this.idiomArray[[M.x,M.y]]=j,this.tempArray=[],this.tempArray[0]=G,this.tempArray[1]=R,this.tempArray[2]=j,this.searchSuccess(i,this.tempArray,r,c),s=!0;break}}else{if(0==a){if(this.idiomArray[[l+1,m+1]]||this.idiomArray[[l+1,m-1]]||this.idiomArray[[l+2,m+1]]||this.idiomArray[[l+2,m-1]]||this.idiomArray[[l+3,m+1]]||this.idiomArray[[l+3,m-1]]||this.idiomArray[[l-1,m]]||this.idiomArray[[l+4,m]])break;var q=this.contantIs([l+1,l+2,l+3]);if(0==q);else{if(!this.isallMoves(q,"x"))break;this.setIdiomArry(q,"x")}var E=cc.v2(l+1-q,m),D=cc.v2(l+2-q,m),T=cc.v2(l+3-q,m),H={pos:E,str:t[1],cl:"x"},$={pos:D,str:t[2],cl:"x"},V={pos:T,str:t[3],cl:"x"};this.idiomArray[[E.x,E.y]]=H,this.idiomArray[[D.x,D.y]]=$,this.idiomArray[[T.x,T.y]]=V,this.tempArray=[],this.tempArray[0]=H,this.tempArray[1]=$,this.tempArray[2]=V,this.searchSuccess(i,this.tempArray,r,c),s=!0;break}if(1==a){if(this.idiomArray[[l-1,m+1]]||this.idiomArray[[l-1,m-1]]||this.idiomArray[[l+1,m+1]]||this.idiomArray[[l+1,m-1]]||this.idiomArray[[l+2,m+1]]||this.idiomArray[[l+2,m-1]]||this.idiomArray[[l-2,m]]||this.idiomArray[[l+3,m]])break;var Y=this.contantIs([l-1,l+1,l+2]);if(0==Y);else{if(!this.isallMoves(Y,"x"))break;this.setIdiomArry(Y,"x")}var Z=cc.v2(l-1-Y,m),z=cc.v2(l+1-Y,m),O=cc.v2(l+2-Y,m),Q={pos:Z,str:t[0],cl:"x"},K={pos:z,str:t[2],cl:"x"},U={pos:O,str:t[3],cl:"x"};this.idiomArray[[Z.x,Z.y]]=Q,this.idiomArray[[z.x,z.y]]=K,this.idiomArray[[O.x,O.y]]=U,this.tempArray=[],this.tempArray[0]=Q,this.tempArray[1]=K,this.tempArray[2]=U,this.searchSuccess(i,this.tempArray,r,c),s=!0;break}if(2==a){if(this.idiomArray[[l-1,m+1]]||this.idiomArray[[l-1,m-1]]||this.idiomArray[[l-2,m+1]]||this.idiomArray[[l-2,m-1]]||this.idiomArray[[l+1,m+1]]||this.idiomArray[[l+1,m-1]]||this.idiomArray[[l-3,m]]||this.idiomArray[[l+2,m]])break;var X=this.contantIs([l-2,l-1,l+1]);if(0==X);else{if(!this.isallMoves(X,"x"))break;this.setIdiomArry(X,"x")}var ii=cc.v2(l-2-X,m),ri=cc.v2(l-1-X,m),ti=cc.v2(l+1-X,m),si={pos:ii,str:t[0],cl:"x"},ei={pos:ri,str:t[1],cl:"x"},oi={pos:ti,str:t[3],cl:"x"};this.idiomArray[[ii.x,ii.y]]=si,this.idiomArray[[ri.x,ri.y]]=ei,this.idiomArray[[ti.x,ti.y]]=oi,this.tempArray=[],this.tempArray[0]=si,this.tempArray[1]=ei,this.tempArray[2]=oi,this.searchSuccess(i,this.tempArray,r,c),s=!0;break}if(3==a){if(this.idiomArray[[l-1,m+1]]||this.idiomArray[[l-1,m-1]]||this.idiomArray[[l-2,m+1]]||this.idiomArray[[l-2,m-1]]||this.idiomArray[[l-3,m+1]]||this.idiomArray[[l-3,m-1]]||this.idiomArray[[l-4,m]]||this.idiomArray[[l+1,m]])break;var ai=this.contantIs([l-3,l-2,l-1]);if(0==ai);else{if(!this.isallMoves(ai,"x"))break;this.setIdiomArry(ai,"x")}var hi=cc.v2(l-3-ai,m),ci=cc.v2(l-2-ai,m),li=cc.v2(l-1-ai,m),mi={pos:hi,str:t[0],cl:"x"},ni={pos:ci,str:t[1],cl:"x"},di={pos:li,str:t[2],cl:"x"};this.idiomArray[[hi.x,hi.y]]=mi,this.idiomArray[[ci.x,ci.y]]=ni,this.idiomArray[[li.x,li.y]]=di,this.tempArray=[],this.tempArray[0]=mi,this.tempArray[1]=ni,this.tempArray[2]=di,this.searchSuccess(i,this.tempArray,r,c),s=!0;break}}console.log("**",this.tempArray,"**")}}if(s)break}if(s){this.idiom[1].splice(i,1);break i}i==this.idiom[1].length-1&&this.amountIdiom==this.loopTimes&&this.setIdomData(),console.log("-----")}console.log("$$",this.idiomArray,"$$"),this.amountIdiom<this.loopTimes&&this.addWords<this.levelWords&&(this.amountIdiom++,this.makeIdioms())},searchSuccess:function(i,r,t,s){this.addWords++,console.log("\u76f8\u540c\u8bcd\uff1a",r,"  ",t,"  ",s),this.levelAr[1].push(this.idiom[1][i]),this.amountIdiom!=this.loopTimes&&this.addWords!=this.levelWords||this.setIdomData()},setIdomData:function(){this.levelAr[0]=this.idiomArray,this.levelArrays.push(this.levelAr),this.refreshBoard(),console.log(" ## \u5173\u5361\u6570\u91cf"+this.levelArrays.length+" ##",this.levelArrays)},contantIs:function(i){var r=[];if(i.forEach(function(i){i<0?r.push(i):i>8&&r.push(i-8)}),r.length>0){return r[0]>0?Math.max.apply(null,r):Math.min.apply(null,r)}return 0},isallMoves:function(i,r){for(var t=r,s=0;s<9;s++)for(var e=0;e<9;e++)if(this.idiomArray[[e,s]]){if("x"==t&&(e-i<0||e-i>8))return!1;if("y"==t&&(s-i<0||s-i>8))return!1}return!0},setIdiomArry:function(i,r){var t=r;if(i>0){for(var s=0;s<9;s++)for(var e=0;e<9;e++)if(this.idiomArray[[e,s]]){var o=this.idiomArray[[e,s]];if("x"==t){var a=e-i;this.idiomArray[[e,s]]=null,this.idiomArray[[a,s]]=o,o.pos.x=a}else if("y"==t){var h=s-i;this.idiomArray[[e,s]]=null,this.idiomArray[[e,h]]=o,o.pos.y=h}}}else if(i<0)for(var c=8;c>=0;c--)for(var l=8;l>=0;l--)if(this.idiomArray[[l,c]]){var m=this.idiomArray[[l,c]];if("x"==t){var n=l-i;this.idiomArray[[l,c]]=null,this.idiomArray[[n,c]]=m,m.pos.x=n}else if("y"==t){var d=c-i;this.idiomArray[[l,c]]=null,this.idiomArray[[l,d]]=m,m.pos.y=d}}},returnHeadWord:function(i){for(var r=0;r<this.idiom[1].length;r++){if(i==this.idiom[1][r].word)return this.idiom[1][r]}},refreshBoard:function(){for(var i=0;i<9;i++)for(var r=0;r<9;r++)if(this.idiomArray[[r,i]]){var t=this.idiomArray[[r,i]];t.pos.x==r&&t.pos.y==i&&this.blockArray[[r,i]].getComponent("BlockSpritePrefab").setWord({wordName:t.str})}else this.blockArray[[r,i]].getComponent("BlockSpritePrefab").setWord({wordName:""})},clickBtn:function(i,r){"start"==r?this.startBuild():"prelevel"==r?(this.setlevel>0&&this.setlevel--,this.idiomArray=this.idiomLevelJson[this.setlevel][0],this.refreshBoard(),this.levelLabel.string="\u7b2c"+(this.setlevel+1)+"\u5173"):"nextlevel"==r&&(this.setlevel<9&&this.setlevel++,this.idiomArray=this.idiomLevelJson[this.setlevel][0],this.refreshBoard(),this.levelLabel.string="\u7b2c"+(this.setlevel+1)+"\u5173")}}),cc._RF.pop()},{}],GameLayer:[function(i,r,t){"use strict";cc._RF.push(r,"cfb79fLW2VGcbwdAVt1vR52","GameLayer");i("GameConfig");cc.Class({extends:cc.Component,properties:{gameArea:cc.Node,selectArea:cc.Node,blockSpritePrefab:cc.Prefab,idiomLevelsList:{default:null,type:cc.JsonAsset},levelLabel:cc.Label},onLoad:function(){this.blockArray=[];for(var i=0;i<9;i++)for(var r=0;r<9;r++){var t=(a=cc.instantiate(this.blockSpritePrefab)).width,s=a.height;a.setPosition(2+2*r+(t*r+t/2),2+2*i+(s*i+s/2)),a.cl=cc.v2(r,i),this.gameArea.addChild(a),this.blockArray[[r,i]]=a,a.getComponent("BlockSpritePrefab").initdata({id:r+"."+i,wordName:""}),a.getComponent(cc.Button).clickEvents[0].customEventData=r+"."+i}cc.log("item",this.blockArray),this.selectArray=[];for(var e=0;e<4;e++)for(var o=0;o<8;o++){var a,h=(a=cc.instantiate(this.blockSpritePrefab)).width=85,c=a.height=85;a.setPosition(4+4*o+(h*o+h/2),4+4*e+(c*e+c/2)),a.cl=cc.v2(o,e),this.selectArea.addChild(a),this.selectArray[[o,e]]=a,a.getComponent("BlockSpritePrefab").initdata({id:o+"."+e,wordName:"\u5b57"}),a.getComponent(cc.Button).clickEvents[0].customEventData=o+"."+e}},start:function(){this.setlevel=0,this.idiomLevelJson=this.idiomLevelsList.json,this.idiomArray=this.idiomLevelJson[this.setlevel][0],this.levelLabel.string="\u7b2c"+(this.setlevel+1)+"\u5173",this.refreshBoard()},rgbFc:function(){var i=[220,20,60],r=[124,252,0],t=(r[0]-i[0])/50,s=(i[1],i[2],cc.callFunc(function(){cc.log("jianbian",i[0]," ",i[1]," ",i[2],""),this.gameArea.color=new cc.Color(i[0],i[1],i[2])},this)),e=1,o=cc.callFunc(function(){function r(i,r,t,s){return i!=t?i+=s*e:i>=t?e=-1:i<=r&&(e=1),i}i[0]=r(i[0],220,124,t),i[1]=r(i[1],20,252,t),i[2]=r(i[2],60,0,t)},this),a=cc.delayTime(.5),h=cc.repeat(cc.sequence(s,a,o),60);this.gameArea.runAction(h)},refreshBoard:function(){for(var i=0;i<9;i++)for(var r=0;r<9;r++)if(this.idiomArray[[r,i]]){var t=this.idiomArray[[r,i]];t.pos.x==r&&t.pos.y==i&&this.blockArray[[r,i]].getComponent("BlockSpritePrefab").setWord({wordName:t.str})}else this.blockArray[[r,i]].getComponent("BlockSpritePrefab").setWord({wordName:""})},clickBtn:function(i,r){"start"==r||("prelevel"==r?(this.setlevel>0&&this.setlevel--,this.idiomArray=this.idiomLevelJson[this.setlevel][0],this.refreshBoard(),this.levelLabel.string="\u7b2c"+(this.setlevel+1)+"\u5173"):"nextlevel"==r&&(this.setlevel<9&&this.setlevel++,this.idiomArray=this.idiomLevelJson[this.setlevel][0],this.refreshBoard(),this.levelLabel.string="\u7b2c"+(this.setlevel+1)+"\u5173"))}}),cc._RF.pop()},{GameConfig:"GameConfig"}],MainScene:[function(i,r,t){"use strict";cc._RF.push(r,"3822dGbDBJNgrKf6sVycRyl","MainScene"),cc.Class({extends:cc.Component,properties:{},start:function(){}}),cc._RF.pop()},{}]},{},["BlockSpritePrefab","GameConfig","GameCreatePrefab","GameLayer","MainScene","CreateIdiom"]);