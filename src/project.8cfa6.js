window.__require=function i(t,r,s){function e(a,l){if(!r[a]){if(!t[a]){var c=a.split("/");if(c=c[c.length-1],!t[c]){var h="function"==typeof __require&&__require;if(!l&&h)return h(c,!0);if(o)return o(c,!0);throw new Error("Cannot find module '"+a+"'")}}var n=r[a]={exports:{}};t[a][0].call(n.exports,function(i){return e(t[a][1][i]||i)},n,n.exports,i,t,r,s)}return r[a].exports}for(var o="function"==typeof __require&&__require,a=0;a<s.length;a++)e(s[a]);return e}({BlockSpritePrefab:[function(i,t,r){"use strict";cc._RF.push(t,"25a6fB9yr5P4LNPFMY94zhc","BlockSpritePrefab"),cc.Class({extends:cc.Component,properties:{id:cc.Label,wordName:cc.Label,wordPos:cc.v2,wordBgColor:{default:[],type:cc.Color}},start:function(){},initdata:function(i){this.id.string=i.id,this.wordName.string=i.wordName},setWord:function(i){this.wordName.string=i.wordName,i.wordName},setWordPos:function(i){this.wordPos=i},getWord:function(){return this.wordName.string},setBgColor:function(i){this.node.color=this.wordBgColor[i]},clickBtn:function(i,t){if(cc.log("\u6d4b\u8bd5\u70b9\u51fb\u3002\u3002\u3002",t),"select"==t.name)return console.log("blockName ",this.wordName.string),Grobal.GameLayer.setFillWordFc(this.wordName.string),void Grobal.GameLayer.employWord(this.wordPos,this.wordName.string,!0);Grobal.GameLayer.refreshMovePos([t.x,t.y])}}),cc._RF.pop()},{}],GameConfig:[function(i,t,r){"use strict";cc._RF.push(t,"aca97QYrStIWZqdopry66XT","GameConfig");t.exports={gameLevel:[0,1e3,3e3,5e3,8e3,1e4,15e3,2e4,25e3,3e4],blockColor:{black:{color:"#000000",coin:1e3},blue:{color:"#0000FF",coin:800},green:{color:"#00FF00",coin:500},yellow:{color:"#FFFF00",coin:250},white:{color:"#FFFFFF",coin:100},red:{color:"#FF0000",coin:50}},blockArray:{1:["black","green","white","red","white","green","black"],2:["black","blue","green","white","red","white","green","blue","black"],3:["black","blue","green","yellow","white","red","white","yellow","green","blue","black"]},toHanzi:["\u4e00","\u4e8c","\u4e09","\u56db","\u4e94","\u516d","\u4e03","\u516b","\u4e5d","\u5341"]},cc._RF.pop()},{}],GameConsts:[function(i,t,r){"use strict";cc._RF.push(t,"da46f3w9eNL5L+P9Crmrasm","GameConsts"),window.GameConsts={BLOCKTYPE:{NONE:0,COMMON:1,EMPTY:2,FILL:3,COMPLETE:4}},cc._RF.pop()},{}],GameCreatePrefab:[function(i,t,r){"use strict";cc._RF.push(t,"5b91d+t/qdLmqA5NSZx3Ohj","GameCreatePrefab");var s=i("GameUtil");cc.Class({extends:cc.Component,properties:{gameArea:cc.Node,blockSpritePrefab:cc.Prefab,idiomList:{default:null,type:cc.JsonAsset},idiomHeadList:{default:null,type:cc.JsonAsset},idiomLevelsList:{default:null,type:cc.JsonAsset},levelLabel:cc.Label},onLoad:function(){this.loopTimes=10,this.levelWords=6,this.createLevels=2,this.blockArray=[];for(var i=0;i<9;i++)for(var t=0;t<9;t++){var r=cc.instantiate(this.blockSpritePrefab),s=r.width,e=r.height;r.setPosition(2+2*t+(s*t+s/2),2+2*i+(e*i+e/2)),r.cl=cc.v2(t,i),this.gameArea.addChild(r),this.blockArray[[t,i]]=r,r.getComponent("BlockSpritePrefab").initdata({id:t+"."+i,wordName:""}),r.getComponent(cc.Button).clickEvents[0].customEventData=t+"."+i}cc.log("item",this.blockArray)},start:function(){this.setlevel=0,this.idiomLevelJson=this.idiomLevelsList.json,this.idiomArray=this.idiomLevelJson[this.setlevel][0],this.levelLabel.string="\u7b2c"+(this.setlevel+1)+"\u5173",this.refreshBoard()},startBuild:function(){var i=this.idiomList.json,t=this.idiomHeadList.json;this.idiomArray={},this.levelArrays=[],this.levelAr=[[],[],[]];for(var r=0;r<this.createLevels;r++){this.idiom=[t[r],i],this.amountIdiom=0,this.addWords=0,this.levelAr=[[],[],[]],this.idiomArray={},this.levelAr[1].push(this.returnHeadWord(this.idiom[0]));var s=this.idiom[0].split("");this.tempArray=[];for(var e=this.randomWordFc(s),o=0;o<s.length;o++){var a=s[o];this.idiomArray[[3+o,4]]={pos:cc.v2(3+o,4),isfill:GameConsts.BLOCKTYPE.COMMON,fillstr:e[o],str:a,cl:"x"},this.tempArray[o]={pos:cc.v2(3+o,4),isfill:GameConsts.BLOCKTYPE.COMMON,fillstr:e[o],str:a,cl:"x"},""==e[o]&&(this.idiomArray[[3+o,4]].isfill=GameConsts.BLOCKTYPE.EMPTY)}this.makeIdioms(),r==this.createLevels-1&&cc.sys.isNative&&(jsb.fileUtils.writeStringToFile(JSON.stringify(this.levelArrays),"test.json"),cc.log(this.levelArrays))}},randomWordFc:function(i){i=i.slice(0);for(var t=s.getRandomArrayElements([0,1,2,3],1),r=function(r){t.forEach(function(t){t==r&&(i[r]="")})},e=0;e<i.length;e++)r(e);return i},makeIdioms:function(){i:for(var i=0;i<this.idiom[1].length;i++){for(var t=this.idiom[1][i].word,r=t.split(""),s=!1,e=this.randomWordFc(r),o=this.tempArray.length,a=1;a<4;a++){for(var l=0;l<r.length;l++){var c=this.tempArray[o-a],h=r[l];if(c.str==h&&c.str==h){var n=c.pos.x,m=c.pos.y;if("x"==c.cl){if(0==l){if(this.idiomArray[[n-1,m-1]]||this.idiomArray[[n+1,m-1]]||this.idiomArray[[n-1,m-2]]||this.idiomArray[[n+1,m-2]]||this.idiomArray[[n-1,m-3]]||this.idiomArray[[n+1,m-3]]||this.idiomArray[[n,m-4]])break;var d=this.contantIs([m-1,m-2,m-3]);if(0==d);else{if(!this.isallMoves(d,"y"))break;this.setIdiomArry(d,"y")}var y=cc.v2(n,m-1-d),f=cc.v2(n,m-2-d),p=cc.v2(n,m-3-d),A={pos:y,isfill:GameConsts.BLOCKTYPE.COMMON,fillstr:e[1],str:r[1],cl:"y"},v={pos:f,isfill:GameConsts.BLOCKTYPE.COMMON,fillstr:e[2],str:r[2],cl:"y"},u={pos:p,isfill:GameConsts.BLOCKTYPE.COMMON,fillstr:e[3],str:r[3],cl:"y"};this.idiomArray[[y.x,y.y]]=A,this.idiomArray[[f.x,f.y]]=v,this.idiomArray[[p.x,p.y]]=u,this.tempArray=[],this.tempArray[0]=A,this.tempArray[1]=v,this.tempArray[2]=u,this.searchSuccess(i,this.tempArray,t,h),s=!0;break}if(1==l){if(this.idiomArray[[n-1,m+1]]||this.idiomArray[[n+1,m+1]]||this.idiomArray[[n-1,m-1]]||this.idiomArray[[n+1,m-1]]||this.idiomArray[[n-1,m-2]]||this.idiomArray[[n+1,m-2]]||this.idiomArray[[n,m+2]]||this.idiomArray[[n,m-3]])break;var C=this.contantIs([m+1,m-1,m-2]);if(0==C);else{if(!this.isallMoves(C,"y"))break;this.setIdiomArry(C,"y")}var b=cc.v2(n,m+1-C),g=cc.v2(n,m-1-C),k=cc.v2(n,m-2-C),L={pos:b,isfill:GameConsts.BLOCKTYPE.COMMON,fillstr:e[0],str:r[0],cl:"y"},P={pos:g,isfill:GameConsts.BLOCKTYPE.COMMON,fillstr:e[2],str:r[2],cl:"y"},O={pos:k,isfill:GameConsts.BLOCKTYPE.COMMON,fillstr:e[3],str:r[3],cl:"y"};this.idiomArray[[b.x,b.y]]=L,this.idiomArray[[g.x,g.y]]=P,this.idiomArray[[k.x,k.y]]=O,this.tempArray=[],this.tempArray[0]=L,this.tempArray[1]=P,this.tempArray[2]=O,this.searchSuccess(i,this.tempArray,t,h),s=!0;break}if(2==l){if(this.idiomArray[[n-1,m+1]]||this.idiomArray[[n+1,m+1]]||this.idiomArray[[n-1,m+2]]||this.idiomArray[[n+1,m+2]]||this.idiomArray[[n-1,m-1]]||this.idiomArray[[n+1,m-1]]||this.idiomArray[[n,m+3]]||this.idiomArray[[n,m-2]])break;var B=this.contantIs([m+2,m+1,m-1]);if(0==B);else{if(!this.isallMoves(B,"y"))break;this.setIdiomArry(B,"y")}var G=cc.v2(n,m+2-B),M=cc.v2(n,m+1-B),x=cc.v2(n,m-1-B),E={pos:G,isfill:GameConsts.BLOCKTYPE.COMMON,fillstr:e[0],str:r[0],cl:"y"},N={pos:M,isfill:GameConsts.BLOCKTYPE.COMMON,fillstr:e[1],str:r[1],cl:"y"},T={pos:x,isfill:GameConsts.BLOCKTYPE.COMMON,fillstr:e[3],str:r[3],cl:"y"};this.idiomArray[[G.x,G.y]]=E,this.idiomArray[[M.x,M.y]]=N,this.idiomArray[[x.x,x.y]]=T,this.tempArray=[],this.tempArray[0]=E,this.tempArray[1]=N,this.tempArray[2]=T,this.searchSuccess(i,this.tempArray,t,h),s=!0;break}if(3==l){if(this.idiomArray[[n-1,m+1]]||this.idiomArray[[n+1,m+1]]||this.idiomArray[[n-1,m+2]]||this.idiomArray[[n+1,m+2]]||this.idiomArray[[n-1,m+3]]||this.idiomArray[[n+1,m+3]]||this.idiomArray[[n,m+4]]||this.idiomArray[[n,m-1]])break;var F=this.contantIs([m+3,m+2,m+1]);if(0==F);else{if(!this.isallMoves(F,"y"))break;this.setIdiomArry(F,"y")}var S=cc.v2(n,m+3-F),w=cc.v2(n,m+2-F),Y=cc.v2(n,m+1-F),K={pos:S,isfill:GameConsts.BLOCKTYPE.COMMON,fillstr:e[0],str:r[0],cl:"y"},I={pos:w,isfill:GameConsts.BLOCKTYPE.COMMON,fillstr:e[1],str:r[1],cl:"y"},W={pos:Y,isfill:GameConsts.BLOCKTYPE.COMMON,fillstr:e[2],str:r[2],cl:"y"};this.idiomArray[[S.x,S.y]]=K,this.idiomArray[[w.x,w.y]]=I,this.idiomArray[[Y.x,Y.y]]=W,this.tempArray=[],this.tempArray[0]=K,this.tempArray[1]=I,this.tempArray[2]=W,this.searchSuccess(i,this.tempArray,t,h),s=!0;break}}else{if(0==l){if(this.idiomArray[[n+1,m+1]]||this.idiomArray[[n+1,m-1]]||this.idiomArray[[n+2,m+1]]||this.idiomArray[[n+2,m-1]]||this.idiomArray[[n+3,m+1]]||this.idiomArray[[n+3,m-1]]||this.idiomArray[[n-1,m]]||this.idiomArray[[n+4,m]])break;var _=this.contantIs([n+1,n+2,n+3]);if(0==_);else{if(!this.isallMoves(_,"x"))break;this.setIdiomArry(_,"x")}var R=cc.v2(n+1-_,m),U=cc.v2(n+2-_,m),j=cc.v2(n+3-_,m),J={pos:R,isfill:GameConsts.BLOCKTYPE.COMMON,fillstr:e[1],str:r[1],cl:"x"},z={pos:U,isfill:GameConsts.BLOCKTYPE.COMMON,fillstr:e[2],str:r[2],cl:"x"},D={pos:j,isfill:GameConsts.BLOCKTYPE.COMMON,fillstr:e[3],str:r[3],cl:"x"};this.idiomArray[[R.x,R.y]]=J,this.idiomArray[[U.x,U.y]]=z,this.idiomArray[[j.x,j.y]]=D,this.tempArray=[],this.tempArray[0]=J,this.tempArray[1]=z,this.tempArray[2]=D,this.searchSuccess(i,this.tempArray,t,h),s=!0;break}if(1==l){if(this.idiomArray[[n-1,m+1]]||this.idiomArray[[n-1,m-1]]||this.idiomArray[[n+1,m+1]]||this.idiomArray[[n+1,m-1]]||this.idiomArray[[n+2,m+1]]||this.idiomArray[[n+2,m-1]]||this.idiomArray[[n-2,m]]||this.idiomArray[[n+3,m]])break;var q=this.contantIs([n-1,n+1,n+2]);if(0==q);else{if(!this.isallMoves(q,"x"))break;this.setIdiomArry(q,"x")}var H=cc.v2(n-1-q,m),V=cc.v2(n+1-q,m),$=cc.v2(n+2-q,m),Q={pos:H,isfill:GameConsts.BLOCKTYPE.COMMON,fillstr:e[0],str:r[0],cl:"x"},Z={pos:V,isfill:GameConsts.BLOCKTYPE.COMMON,fillstr:e[2],str:r[2],cl:"x"},X={pos:$,isfill:GameConsts.BLOCKTYPE.COMMON,fillstr:e[3],str:r[3],cl:"x"};this.idiomArray[[H.x,H.y]]=Q,this.idiomArray[[V.x,V.y]]=Z,this.idiomArray[[$.x,$.y]]=X,this.tempArray=[],this.tempArray[0]=Q,this.tempArray[1]=Z,this.tempArray[2]=X,this.searchSuccess(i,this.tempArray,t,h),s=!0;break}if(2==l){if(this.idiomArray[[n-1,m+1]]||this.idiomArray[[n-1,m-1]]||this.idiomArray[[n-2,m+1]]||this.idiomArray[[n-2,m-1]]||this.idiomArray[[n+1,m+1]]||this.idiomArray[[n+1,m-1]]||this.idiomArray[[n-3,m]]||this.idiomArray[[n+2,m]])break;var ii=this.contantIs([n-2,n-1,n+1]);if(0==ii);else{if(!this.isallMoves(ii,"x"))break;this.setIdiomArry(ii,"x")}var ti=cc.v2(n-2-ii,m),ri=cc.v2(n-1-ii,m),si=cc.v2(n+1-ii,m),ei={pos:ti,isfill:GameConsts.BLOCKTYPE.COMMON,fillstr:e[0],str:r[0],cl:"x"},oi={pos:ri,isfill:GameConsts.BLOCKTYPE.COMMON,fillstr:e[1],str:r[1],cl:"x"},ai={pos:si,isfill:GameConsts.BLOCKTYPE.COMMON,fillstr:e[3],str:r[3],cl:"x"};this.idiomArray[[ti.x,ti.y]]=ei,this.idiomArray[[ri.x,ri.y]]=oi,this.idiomArray[[si.x,si.y]]=ai,this.tempArray=[],this.tempArray[0]=ei,this.tempArray[1]=oi,this.tempArray[2]=ai,this.searchSuccess(i,this.tempArray,t,h),s=!0;break}if(3==l){if(this.idiomArray[[n-1,m+1]]||this.idiomArray[[n-1,m-1]]||this.idiomArray[[n-2,m+1]]||this.idiomArray[[n-2,m-1]]||this.idiomArray[[n-3,m+1]]||this.idiomArray[[n-3,m-1]]||this.idiomArray[[n-4,m]]||this.idiomArray[[n+1,m]])break;var li=this.contantIs([n-3,n-2,n-1]);if(0==li);else{if(!this.isallMoves(li,"x"))break;this.setIdiomArry(li,"x")}var ci=cc.v2(n-3-li,m),hi=cc.v2(n-2-li,m),ni=cc.v2(n-1-li,m),mi={pos:ci,isfill:GameConsts.BLOCKTYPE.COMMON,fillstr:e[0],str:r[0],cl:"x"},di={pos:hi,isfill:GameConsts.BLOCKTYPE.COMMON,fillstr:e[1],str:r[1],cl:"x"},yi={pos:ni,isfill:GameConsts.BLOCKTYPE.COMMON,fillstr:e[2],str:r[2],cl:"x"};this.idiomArray[[ci.x,ci.y]]=mi,this.idiomArray[[hi.x,hi.y]]=di,this.idiomArray[[ni.x,ni.y]]=yi,this.tempArray=[],this.tempArray[0]=mi,this.tempArray[1]=di,this.tempArray[2]=yi,this.searchSuccess(i,this.tempArray,t,h),s=!0;break}}console.log("**",this.tempArray,"**")}}if(s)break}if(s){this.idiom[1].splice(i,1);break i}i==this.idiom[1].length-1&&this.amountIdiom==this.loopTimes&&this.setIdomData(),console.log("-----")}console.log("$$",this.idiomArray,"$$"),this.amountIdiom<this.loopTimes&&this.addWords<this.levelWords&&(this.amountIdiom++,this.makeIdioms())},searchSuccess:function(i,t,r,s){console.log("\u76f8\u540c\u8bcd\uff1a",t,"  ",r,"  ",s),this.addWords++,this.levelAr[1].push(this.idiom[1][i]);for(var e=0;e<t.length;e++){var o=t[e];""==o.fillstr&&(o.isfill=GameConsts.BLOCKTYPE.EMPTY)}this.amountIdiom!=this.loopTimes&&this.addWords!=this.levelWords||this.setIdomData()},setIdomData:function(){this.levelAr[0]=this.idiomArray;for(var i=0;i<9;i++)for(var t=0;t<9;t++){var r=this.idiomArray[[t,i]];r&&""==r.fillstr&&this.levelAr[2].push({str:r.str,pos:r.pos,zhanyong:!1})}this.levelArrays.push(this.levelAr),this.refreshBoard(),console.log(" ## \u5173\u5361\u6570\u91cf"+this.levelArrays.length+" ##",this.levelArrays)},contantIs:function(i){var t=[];if(i.forEach(function(i){i<0?t.push(i):i>8&&t.push(i-8)}),t.length>0){return t[0]>0?Math.max.apply(null,t):Math.min.apply(null,t)}return 0},isallMoves:function(i,t){for(var r=t,s=0;s<9;s++)for(var e=0;e<9;e++)if(this.idiomArray[[e,s]]){if("x"==r&&(e-i<0||e-i>8))return!1;if("y"==r&&(s-i<0||s-i>8))return!1}return!0},setIdiomArry:function(i,t){var r=t;if(i>0){for(var s=0;s<9;s++)for(var e=0;e<9;e++)if(this.idiomArray[[e,s]]){var o=this.idiomArray[[e,s]];if("x"==r){var a=e-i;this.idiomArray[[e,s]]=null,this.idiomArray[[a,s]]=o,o.pos.x=a}else if("y"==r){var l=s-i;this.idiomArray[[e,s]]=null,this.idiomArray[[e,l]]=o,o.pos.y=l}}}else if(i<0)for(var c=8;c>=0;c--)for(var h=8;h>=0;h--)if(this.idiomArray[[h,c]]){var n=this.idiomArray[[h,c]];if("x"==r){var m=h-i;this.idiomArray[[h,c]]=null,this.idiomArray[[m,c]]=n,n.pos.x=m}else if("y"==r){var d=c-i;this.idiomArray[[h,c]]=null,this.idiomArray[[h,d]]=n,n.pos.y=d}}},returnHeadWord:function(i){for(var t=0;t<this.idiom[1].length;t++){if(i==this.idiom[1][t].word)return this.idiom[1][t]}},refreshBoard:function(){for(var i=0;i<9;i++)for(var t=0;t<9;t++)if(this.idiomArray[[t,i]]){var r=this.idiomArray[[t,i]];r.pos.x==t&&r.pos.y==i&&this.blockArray[[t,i]].getComponent("BlockSpritePrefab").setWord({wordName:r.str})}else this.blockArray[[t,i]].getComponent("BlockSpritePrefab").setWord({wordName:""})},clickBtn:function(i,t){"start"==t?this.startBuild():"prelevel"==t?(this.setlevel>0&&this.setlevel--,this.idiomArray=this.idiomLevelJson[this.setlevel][0],this.refreshBoard(),this.levelLabel.string="\u7b2c"+(this.setlevel+1)+"\u5173"):"nextlevel"==t&&(this.setlevel<9&&this.setlevel++,this.idiomArray=this.idiomLevelJson[this.setlevel][0],this.refreshBoard(),this.levelLabel.string="\u7b2c"+(this.setlevel+1)+"\u5173")}}),cc._RF.pop()},{GameUtil:"GameUtil"}],GameFinishLayer:[function(i,t,r){"use strict";cc._RF.push(t,"d355bu8t3NIsLV8u6o4NEf/","GameFinishLayer"),cc.Class({extends:cc.Component,properties:{},start:function(){},clickBtn:function(i,t){}}),cc._RF.pop()},{}],GameLayer:[function(i,t,r){"use strict";cc._RF.push(t,"cfb79fLW2VGcbwdAVt1vR52","GameLayer");i("GameConfig");var s=i("GameUtil");cc.Class({extends:cc.Component,properties:{gameArea:cc.Node,selectArea:cc.Node,moveBlock:cc.Node,blockSpritePrefab:cc.Prefab,gamePopUpPrefab:cc.Prefab,idiomLevelsList:{default:null,type:cc.JsonAsset},levelLabel:cc.Label},onLoad:function(){Grobal.GameLayer=this,this.blockArray=[];for(var i=0;i<9;i++)for(var t=0;t<9;t++){var r=(a=cc.instantiate(this.blockSpritePrefab)).width,s=a.height;a.setPosition(2+2*t+(r*t+r/2),2+2*i+(s*i+s/2)),a.cl=cc.v2(t,i),this.gameArea.addChild(a),this.blockArray[[t,i]]=a,a.getComponent("BlockSpritePrefab").initdata({id:t+"."+i,wordName:""}),a.getComponent(cc.Button).clickEvents[0].customEventData=cc.v2(t,i)}cc.log("item",this.blockArray),this.selectArray=[];for(var e=0;e<4;e++)for(var o=0;o<8;o++){var a,l=(a=cc.instantiate(this.blockSpritePrefab)).width=85,c=a.height=85;a.setPosition(4.5+4.5*o+(l*o+l/2),4.5+4.5*e+(c*e+c/2)),a.cl=cc.v2(o,e),this.selectArea.addChild(a),this.selectArray[[o,e]]=a,a.getComponent("BlockSpritePrefab").initdata({id:o+"."+e,wordName:""}),a.getComponent(cc.Button).clickEvents[0].customEventData={pos:cc.v2(o,e),name:"select"}}this.gamePopUpNode||(this.gamePopUpNode=cc.instantiate(this.gamePopUpPrefab),this.gamePopUpNode.active=!1,this.node.addChild(this.gamePopUpNode),this.gamePopUpNode.getComponent("GamePopUp").setTipLabel("\u662f\u5426\u91cd\u65b0\u5f00\u59cb\u5f53\u524d\u5173\u5361\uff1f"))},start:function(){this.setlevel=0,this.idiomLevelJson=this.idiomLevelsList.json,this.initGame()},initGame:function(){this.idiomArray=s.objDeepCopy(this.idiomLevelJson[this.setlevel][0]),this.selectArryObj=s.objDeepCopy(this.idiomLevelJson[this.setlevel][2]),this.levelLabel.string="\u7b2c"+(this.setlevel+1)+"\u5173",this.refreshData()},rgbFc:function(){var i=[220,20,60],t=[124,252,0],r=(t[0]-i[0])/50,s=(i[1],i[2],cc.callFunc(function(){cc.log("jianbian",i[0]," ",i[1]," ",i[2],""),this.gameArea.color=new cc.Color(i[0],i[1],i[2])},this)),e=1,o=cc.callFunc(function(){function t(i,t,r,s){return i!=r?i+=s*e:i>=r?e=-1:i<=t&&(e=1),i}i[0]=t(i[0],220,124,r),i[1]=t(i[1],20,252,r),i[2]=t(i[2],60,0,r)},this),a=cc.delayTime(.5),l=cc.repeat(cc.sequence(s,a,o),60);this.gameArea.runAction(l)},refreshData:function(){this.moveBlock.x=0,this.moveBlock.y=0,this.refreshBoard(),this.refreshSelectBoard()},refreshBoard:function(){for(var i=8;i>=0;i--)for(var t=0;t<9;t++)if(this.idiomArray[[t,i]]&&0!=Object.keys(this.idiomArray[[t,i]]).length){var r=this.idiomArray[[t,i]];r.pos.x==t&&r.pos.y==i&&(this.blockArray[[t,i]].getComponent("BlockSpritePrefab").setWord({wordName:r.fillstr}),this.refreshBlockState(r,[t,i]))}else this.blockArray[[t,i]].getComponent("BlockSpritePrefab").setWord({wordName:""}),this.blockArray[[t,i]].getComponent("BlockSpritePrefab").setBgColor(0)},refreshBlockState:function(i,t){var r=0;""!=i.fillstr&&i.isfill==GameConsts.BLOCKTYPE.FILL?r=3:i.fillstr==i.str&&i.isfill==GameConsts.BLOCKTYPE.COMPLETE?r=4:""==i.fillstr&&i.isfill==GameConsts.BLOCKTYPE.EMPTY?(r=2,0==this.moveBlock.x&&0==this.moveBlock.y&&this.refreshMovePos(t)):i.fillstr&&i.isfill==GameConsts.BLOCKTYPE.COMMON&&(r=1),this.blockArray[t].getComponent("BlockSpritePrefab").setBgColor(r)},employWord:function(i,t,r){for(var s=0;s<this.selectArryObj.length;s++){var e=this.selectArryObj[s];if(e.str==t&&e.pos.x==i.x&&e.pos.y==i.y){e.zhanyong=r;break}}this.refreshSelectBoard(!0)},refreshSelectBoard:function(i){var t=this.selectArryObj;i||(t=s.randomArraySort(this.selectArryObj));for(var r=0,e="",o=3;o>=0;o--)for(var a=0;a<8;a++)r<t.length&&t[r]?(e=t[r].str,this.selectArray[[a,o]].getComponent("BlockSpritePrefab").setWord({wordName:e}),this.selectArray[[a,o]].getComponent("BlockSpritePrefab").setWordPos(cc.v2(t[r].pos.x,t[r].pos.y))):e="",r>=t.length&&(e=""),""==e?this.selectArray[[a,o]].getComponent("BlockSpritePrefab").node.active=!1:""==e||t[r].zhanyong?""!=e&&t[r].zhanyong&&(this.selectArray[[a,o]].getComponent("BlockSpritePrefab").node.active=!1):this.selectArray[[a,o]].getComponent("BlockSpritePrefab").node.active=!0,r++},refreshMovePos:function(i){var t=this.idiomArray[i],r=this.blockArray[i];!t||t.isfill!=GameConsts.BLOCKTYPE.EMPTY&&t.isfill!=GameConsts.BLOCKTYPE.FILL||(this.moveBlock.setPosition(r.position),this.moveBlock.zuobiao=i,t.isfill==GameConsts.BLOCKTYPE.FILL&&(this.setFillWordFc(""),this.refreshSelectBoard(!0)))},setFillWordFc:function(i){if(this.moveBlock.zuobiao){var t=this.blockArray[this.moveBlock.zuobiao].getComponent("BlockSpritePrefab").getWord();if(t)for(var r=this.selectArryObj,s=0;s<r.length;s++){var e=r[s];if(e.str==t){this.employWord(e.pos,t,!1);break}}this.blockArray[this.moveBlock.zuobiao].getComponent("BlockSpritePrefab").setWord({wordName:this.idiomArray[this.moveBlock.zuobiao].fillstr=i}),this.idiomArray[this.moveBlock.zuobiao].isfill=""==i?GameConsts.BLOCKTYPE.EMPTY:GameConsts.BLOCKTYPE.FILL,this.refreshBlockState(this.idiomArray[this.moveBlock.zuobiao],this.moveBlock.zuobiao),this.checkIdiomFinish(this.moveBlock.zuobiao)}},checkIdiomFinish:function(i){var t=[[],[]],r=[[],[]],s=0,e=0,o=i[0],a=i[1];this.idiomArray[[o,a]].str==this.idiomArray[[o,a]].fillstr&&""!=this.idiomArray[[o,a]].fillstr?(s++,e++,t[0].push(i),t[1].push(i)):this.idiomArray[[o,a]].str!=this.idiomArray[[o,a]].fillstr&&""!=this.idiomArray[[o,a]].fillstr&&(r[0].push(i),r[1].push(i));for(var l=0;l<4;l++){var c=1;0==l||2==l?c=-1:1!=l&&3!=l||(c=1);for(var h=0;h<3;h++){var n=0;n=l<2?[o+(h+1)*c,a]:[o,a+(h+1)*c];var m=this.idiomArray[n];if(!m||0==Object.keys(m).length)break;""!=m.fillstr&&m.str==m.fillstr?0==l||1==l?(s++,t[0].push(n)):2!=l&&3!=l||(e++,t[1].push(n)):""!=m.fillstr&&m.str!=m.fillstr&&(0==l||1==l?r[0].push(n):2!=l&&3!=l||r[1].push(n))}}if(cc.log(" ce shi \u6210\u529fX",s),cc.log(" ce shi \u6210\u529fY",e),4==s)for(var d=0;d<t[0].length;d++){var y=t[0][d];this.idiomArray[y].isfill=GameConsts.BLOCKTYPE.COMPLETE,this.blockArray[y].getComponent("BlockSpritePrefab").setBgColor(GameConsts.BLOCKTYPE.COMPLETE)}if(4==e)for(var f=0;f<t[1].length;f++){var p=t[1][f];this.idiomArray[p].isfill=GameConsts.BLOCKTYPE.COMPLETE,this.blockArray[p].getComponent("BlockSpritePrefab").setBgColor(GameConsts.BLOCKTYPE.COMPLETE)}},clickBtn:function(i,t){if("start"==t);else if("prelevel"==t)this.setlevel>0&&this.setlevel--,this.initGame();else if("nextlevel"==t)this.setlevel<this.idiomLevelJson.length-1&&this.setlevel++,this.initGame();else if("home"==t);else if("restart"==t){this.gamePopUpNode.active=!0,this.gamePopUpNode.getComponent("GamePopUp").setCallback(function(){r.initGame()});var r=this}}}),cc._RF.pop()},{GameConfig:"GameConfig",GameUtil:"GameUtil"}],GamePopUp:[function(i,t,r){"use strict";cc._RF.push(t,"035e5JytzFHQJGArHKaxpxc","GamePopUp"),cc.Class({extends:cc.Component,properties:{tipLabel:cc.Label},start:function(){},setTipLabel:function(i){this.tipLabel.string=i},setCallback:function(i){this.response=i},btnClick:function(i,t){"ready"==t?(this.node.active=!1,this.response(123123123)):"cancel"==t&&(this.node.active=!1)}}),cc._RF.pop()},{}],GameUtil:[function(i,t,r){"use strict";cc._RF.push(t,"3ba83jQJHJIBLa4ZC8Y0Wt8","GameUtil");var s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(i){return typeof i}:function(i){return i&&"function"==typeof Symbol&&i.constructor===Symbol&&i!==Symbol.prototype?"symbol":typeof i},e={getRandomArrayElements:function(i,t){for(var r,s,e=i.slice(0),o=i.length,a=o-t;o-- >a;)r=e[s=Math.floor((o+1)*Math.random())],e[s]=e[o],e[o]=r;return e.slice(a)},randomArraySort:function(i){return i.sort(function(i,t){return Math.random()>.5?-1:1})},objDeepCopy:function(i){var t=i instanceof Array?[]:{};for(var r in i)t[r]="object"===s(i[r])?this.objDeepCopy(i[r]):i[r];return t}};t.exports=e,cc._RF.pop()},{}],Grobal:[function(i,t,r){"use strict";cc._RF.push(t,"3e3casR7vxDx7sDDdoGw28J","Grobal"),window.Grobal={GameLayer:null},cc._RF.pop()},{}],MainScene:[function(i,t,r){"use strict";cc._RF.push(t,"3822dGbDBJNgrKf6sVycRyl","MainScene"),cc.Class({extends:cc.Component,properties:{},start:function(){}}),cc._RF.pop()},{}]},{},["BlockSpritePrefab","GameConfig","GameCreatePrefab","GameFinishLayer","GameLayer","GamePopUp","MainScene","GameConsts","GameUtil","Grobal"]);