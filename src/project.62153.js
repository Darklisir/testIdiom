window.__require=function i(r,t,s){function e(a,h){if(!t[a]){if(!r[a]){var c=a.split("/");if(c=c[c.length-1],!r[c]){var l="function"==typeof __require&&__require;if(!h&&l)return l(c,!0);if(o)return o(c,!0);throw new Error("Cannot find module '"+a+"'")}}var y=t[a]={exports:{}};r[a][0].call(y.exports,function(i){return e(r[a][1][i]||i)},y,y.exports,i,r,t,s)}return t[a].exports}for(var o="function"==typeof __require&&__require,a=0;a<s.length;a++)e(s[a]);return e}({BlockSpritePrefab:[function(i,r,t){"use strict";cc._RF.push(r,"25a6fB9yr5P4LNPFMY94zhc","BlockSpritePrefab"),cc.Class({extends:cc.Component,properties:{id:cc.Label,wordName:cc.Label},start:function(){},initdata:function(i){this.id.string=i.id,this.wordName.string=i.wordName},setWord:function(i){this.wordName.string=i.wordName},clickBtn:function(i,r){cc.log("\u6d4b\u8bd5\u70b9\u51fb\u3002\u3002\u3002",r)}}),cc._RF.pop()},{}],GameConfig:[function(i,r,t){"use strict";cc._RF.push(r,"aca97QYrStIWZqdopry66XT","GameConfig");r.exports={loopTimes:10,levelWords:6,createLevels:1,gameLevel:[0,1e3,3e3,5e3,8e3,1e4,15e3,2e4,25e3,3e4],blockColor:{black:{color:"#000000",coin:1e3},blue:{color:"#0000FF",coin:800},green:{color:"#00FF00",coin:500},yellow:{color:"#FFFF00",coin:250},white:{color:"#FFFFFF",coin:100},red:{color:"#FF0000",coin:50}},blockArray:{1:["black","green","white","red","white","green","black"],2:["black","blue","green","white","red","white","green","blue","black"],3:["black","blue","green","yellow","white","red","white","yellow","green","blue","black"]},toHanzi:["\u4e00","\u4e8c","\u4e09","\u56db","\u4e94","\u516d","\u4e03","\u516b","\u4e5d","\u5341"]},cc._RF.pop()},{}],GameLayer:[function(i,r,t){"use strict";cc._RF.push(r,"cfb79fLW2VGcbwdAVt1vR52","GameLayer");var s=i("GameConfig");cc.Class({extends:cc.Component,properties:{gameArea:cc.Node,blockSpritePrefab:cc.Prefab,idiomList:{default:null,type:cc.JsonAsset},idiomHeadList:{default:null,type:cc.JsonAsset},idiomLevelsList:{default:null,type:cc.JsonAsset},levelLabel:cc.Label},onLoad:function(){this.blockArray=[];for(var i=0;i<9;i++)for(var r=0;r<9;r++){var t=cc.instantiate(this.blockSpritePrefab),s=t.width,e=t.height;t.setPosition(2+2*r+(s*r+s/2),2+2*i+(e*i+e/2)),t.cl=cc.v2(r,i),this.gameArea.addChild(t),this.blockArray[[r,i]]=t,t.getComponent("BlockSpritePrefab").initdata({id:r+"."+i,wordName:""}),t.getComponent(cc.Button).clickEvents[0].customEventData=r+"."+i}cc.log("item",this.blockArray)},start:function(){this.idiomLevelJson=this.idiomLevelsList.json,this.setlevel=0,this.idiomArray=this.idiomLevelJson[this.setlevel][0],this.refreshBoard(),this.levelLabel.string="\u7b2c"+(this.setlevel+1)+"\u5173"},startBuild:function(){var i=this.idiomList.json,r=this.idiomHeadList.json;this.idiomArray={},this.levelArrays=[],this.levelAr=[[],[]];for(var t=0;t<s.createLevels;t++){this.idiom=[r[t],i],this.amountIdiom=0,this.addWords=0,this.levelAr=[[],[]],this.idiomArray={},this.levelAr[1].push(this.returnHeadWord(this.idiom[0]));var e=this.idiom[0].split("");this.tempArray=[];for(var o=0;o<e.length;o++){var a=e[o];this.idiomArray[[3+o,4]]={pos:cc.v2(3+o,4),str:a,cl:"x"},this.tempArray[o]={pos:cc.v2(3+o,4),str:a,cl:"x"}}this.makeIdioms(),t==s.createLevels-1&&cc.sys.isNative&&(jsb.fileUtils.writeStringToFile(JSON.stringify(this.levelArrays),"test.json"),cc.log(this.levelArrays))}},makeIdioms:function(){i:for(var i=0;i<this.idiom[1].length;i++){for(var r=this.idiom[1][i].word,t=r.split(""),e=!1,o=this.tempArray.length,a=1;a<4;a++){for(var h=0;h<t.length;h++){var c=this.tempArray[o-a],l=t[h];if(c.str==l&&c.str==l){var y=c.pos.x,m=c.pos.y;if("x"==c.cl){if(0==h){if(this.idiomArray[[y-1,m-1]]||this.idiomArray[[y+1,m-1]]||this.idiomArray[[y-1,m-2]]||this.idiomArray[[y+1,m-2]]||this.idiomArray[[y-1,m-3]]||this.idiomArray[[y+1,m-3]]||this.idiomArray[[y,m-4]])break;var d=this.contantIs([m-1,m-2,m-3]);if(0==d);else{if(!this.isallMoves(d,"y"))break;this.setIdiomArry(d,"y")}var n=cc.v2(y,m-1-d),A=cc.v2(y,m-2-d),p=cc.v2(y,m-3-d),v={pos:n,str:t[1],cl:"y"},f={pos:A,str:t[2],cl:"y"},u={pos:p,str:t[3],cl:"y"};this.idiomArray[[n.x,n.y]]=v,this.idiomArray[[A.x,A.y]]=f,this.idiomArray[[p.x,p.y]]=u,this.tempArray=[],this.tempArray[0]=v,this.tempArray[1]=f,this.tempArray[2]=u,this.searchSuccess(i,this.tempArray,r,l),e=!0;break}if(1==h){if(this.idiomArray[[y-1,m+1]]||this.idiomArray[[y+1,m+1]]||this.idiomArray[[y-1,m-1]]||this.idiomArray[[y+1,m-1]]||this.idiomArray[[y-1,m-2]]||this.idiomArray[[y+1,m-2]]||this.idiomArray[[y,m+2]]||this.idiomArray[[y,m-3]])break;var b=this.contantIs([m+1,m-1,m-2]);if(0==b);else{if(!this.isallMoves(b,"y"))break;this.setIdiomArry(b,"y")}var x=cc.v2(y,m+1-b),k=cc.v2(y,m-1-b),g=cc.v2(y,m-2-b),I={pos:x,str:t[0],cl:"y"},L={pos:k,str:t[2],cl:"y"},w={pos:g,str:t[3],cl:"y"};this.idiomArray[[x.x,x.y]]=I,this.idiomArray[[k.x,k.y]]=L,this.idiomArray[[g.x,g.y]]=w,this.tempArray=[],this.tempArray[0]=I,this.tempArray[1]=L,this.tempArray[2]=w,this.searchSuccess(i,this.tempArray,r,l),e=!0;break}if(2==h){if(this.idiomArray[[y-1,m+1]]||this.idiomArray[[y+1,m+1]]||this.idiomArray[[y-1,m+2]]||this.idiomArray[[y+1,m+2]]||this.idiomArray[[y-1,m-1]]||this.idiomArray[[y+1,m-1]]||this.idiomArray[[y,m+3]]||this.idiomArray[[y,m-2]])break;var F=this.contantIs([m+2,m+1,m-1]);if(0==F);else{if(!this.isallMoves(F,"y"))break;this.setIdiomArry(F,"y")}var S=cc.v2(y,m+2-F),C=cc.v2(y,m+1-F),B=cc.v2(y,m-1-F),_={pos:S,str:t[0],cl:"y"},M={pos:C,str:t[1],cl:"y"},W={pos:B,str:t[3],cl:"y"};this.idiomArray[[S.x,S.y]]=_,this.idiomArray[[C.x,C.y]]=M,this.idiomArray[[B.x,B.y]]=W,this.tempArray=[],this.tempArray[0]=_,this.tempArray[1]=M,this.tempArray[2]=W,this.searchSuccess(i,this.tempArray,r,l),e=!0;break}if(3==h){if(this.idiomArray[[y-1,m+1]]||this.idiomArray[[y+1,m+1]]||this.idiomArray[[y-1,m+2]]||this.idiomArray[[y+1,m+2]]||this.idiomArray[[y-1,m+3]]||this.idiomArray[[y+1,m+3]]||this.idiomArray[[y,m+4]]||this.idiomArray[[y,m-1]])break;var N=this.contantIs([m+3,m+2,m+1]);if(0==N);else{if(!this.isallMoves(N,"y"))break;this.setIdiomArry(N,"y")}var P=cc.v2(y,m+3-N),G=cc.v2(y,m+2-N),R=cc.v2(y,m+1-N),J={pos:P,str:t[0],cl:"y"},q={pos:G,str:t[1],cl:"y"},T={pos:R,str:t[2],cl:"y"};this.idiomArray[[P.x,P.y]]=J,this.idiomArray[[G.x,G.y]]=q,this.idiomArray[[R.x,R.y]]=T,this.tempArray=[],this.tempArray[0]=J,this.tempArray[1]=q,this.tempArray[2]=T,this.searchSuccess(i,this.tempArray,r,l),e=!0;break}}else{if(0==h){if(this.idiomArray[[y+1,m+1]]||this.idiomArray[[y+1,m-1]]||this.idiomArray[[y+2,m+1]]||this.idiomArray[[y+2,m-1]]||this.idiomArray[[y+3,m+1]]||this.idiomArray[[y+3,m-1]]||this.idiomArray[[y-1,m]]||this.idiomArray[[y+4,m]])break;var j=this.contantIs([y+1,y+2,y+3]);if(0==j);else{if(!this.isallMoves(j,"x"))break;this.setIdiomArry(j,"x")}var D=cc.v2(y+1-j,m),H=cc.v2(y+2-j,m),E=cc.v2(y+3-j,m),$={pos:D,str:t[1],cl:"x"},V={pos:H,str:t[2],cl:"x"},z={pos:E,str:t[3],cl:"x"};this.idiomArray[[D.x,D.y]]=$,this.idiomArray[[H.x,H.y]]=V,this.idiomArray[[E.x,E.y]]=z,this.tempArray=[],this.tempArray[0]=$,this.tempArray[1]=V,this.tempArray[2]=z,this.searchSuccess(i,this.tempArray,r,l),e=!0;break}if(1==h){if(this.idiomArray[[y-1,m+1]]||this.idiomArray[[y-1,m-1]]||this.idiomArray[[y+1,m+1]]||this.idiomArray[[y+1,m-1]]||this.idiomArray[[y+2,m+1]]||this.idiomArray[[y+2,m-1]]||this.idiomArray[[y-2,m]]||this.idiomArray[[y+3,m]])break;var Y=this.contantIs([y-1,y+1,y+2]);if(0==Y);else{if(!this.isallMoves(Y,"x"))break;this.setIdiomArry(Y,"x")}var K=cc.v2(y-1-Y,m),O=cc.v2(y+1-Y,m),Q=cc.v2(y+2-Y,m),U={pos:K,str:t[0],cl:"x"},X={pos:O,str:t[2],cl:"x"},Z={pos:Q,str:t[3],cl:"x"};this.idiomArray[[K.x,K.y]]=U,this.idiomArray[[O.x,O.y]]=X,this.idiomArray[[Q.x,Q.y]]=Z,this.tempArray=[],this.tempArray[0]=U,this.tempArray[1]=X,this.tempArray[2]=Z,this.searchSuccess(i,this.tempArray,r,l),e=!0;break}if(2==h){if(this.idiomArray[[y-1,m+1]]||this.idiomArray[[y-1,m-1]]||this.idiomArray[[y-2,m+1]]||this.idiomArray[[y-2,m-1]]||this.idiomArray[[y+1,m+1]]||this.idiomArray[[y+1,m-1]]||this.idiomArray[[y-3,m]]||this.idiomArray[[y+2,m]])break;var ii=this.contantIs([y-2,y-1,y+1]);if(0==ii);else{if(!this.isallMoves(ii,"x"))break;this.setIdiomArry(ii,"x")}var ri=cc.v2(y-2-ii,m),ti=cc.v2(y-1-ii,m),si=cc.v2(y+1-ii,m),ei={pos:ri,str:t[0],cl:"x"},oi={pos:ti,str:t[1],cl:"x"},ai={pos:si,str:t[3],cl:"x"};this.idiomArray[[ri.x,ri.y]]=ei,this.idiomArray[[ti.x,ti.y]]=oi,this.idiomArray[[si.x,si.y]]=ai,this.tempArray=[],this.tempArray[0]=ei,this.tempArray[1]=oi,this.tempArray[2]=ai,this.searchSuccess(i,this.tempArray,r,l),e=!0;break}if(3==h){if(this.idiomArray[[y-1,m+1]]||this.idiomArray[[y-1,m-1]]||this.idiomArray[[y-2,m+1]]||this.idiomArray[[y-2,m-1]]||this.idiomArray[[y-3,m+1]]||this.idiomArray[[y-3,m-1]]||this.idiomArray[[y-4,m]]||this.idiomArray[[y+1,m]])break;var hi=this.contantIs([y-3,y-2,y-1]);if(0==hi);else{if(!this.isallMoves(hi,"x"))break;this.setIdiomArry(hi,"x")}var ci=cc.v2(y-3-hi,m),li=cc.v2(y-2-hi,m),yi=cc.v2(y-1-hi,m),mi={pos:ci,str:t[0],cl:"x"},di={pos:li,str:t[1],cl:"x"},ni={pos:yi,str:t[2],cl:"x"};this.idiomArray[[ci.x,ci.y]]=mi,this.idiomArray[[li.x,li.y]]=di,this.idiomArray[[yi.x,yi.y]]=ni,this.tempArray=[],this.tempArray[0]=mi,this.tempArray[1]=di,this.tempArray[2]=ni,this.searchSuccess(i,this.tempArray,r,l),e=!0;break}}console.log("**",this.tempArray,"**")}}if(e)break}if(e){this.idiom[1].splice(i,1);break i}i==this.idiom[1].length-1&&this.amountIdiom==s.loopTimes&&this.setIdomData(),console.log("-----")}console.log("$$",this.idiomArray,"$$"),this.amountIdiom<s.loopTimes&&this.addWords<s.levelWords&&(this.amountIdiom++,this.makeIdioms())},searchSuccess:function(i,r,t,e){this.addWords++,console.log("\u76f8\u540c\u8bcd\uff1a",r,"  ",t,"  ",e),this.levelAr[1].push(this.idiom[1][i]),this.amountIdiom!=s.loopTimes&&this.addWords!=s.levelWords||this.setIdomData()},setIdomData:function(){this.levelAr[0]=this.idiomArray,this.levelArrays.push(this.levelAr),this.refreshBoard(),console.log(" ## \u5173\u5361\u6570\u91cf"+this.levelArrays.length+" ##",this.levelArrays)},contantIs:function(i){var r=[];if(i.forEach(function(i){i<0?r.push(i):i>8&&r.push(i-8)}),r.length>0){return r[0]>0?Math.max.apply(null,r):Math.min.apply(null,r)}return 0},isallMoves:function(i,r){for(var t=r,s=0;s<9;s++)for(var e=0;e<9;e++)if(this.idiomArray[[e,s]]){if("x"==t&&(e-i<0||e-i>8))return!1;if("y"==t&&(s-i<0||s-i>8))return!1}return!0},setIdiomArry:function(i,r){var t=r;if(i>0){for(var s=0;s<9;s++)for(var e=0;e<9;e++)if(this.idiomArray[[e,s]]){var o=this.idiomArray[[e,s]];if("x"==t){var a=e-i;this.idiomArray[[e,s]]=null,this.idiomArray[[a,s]]=o,o.pos.x=a}else if("y"==t){var h=s-i;this.idiomArray[[e,s]]=null,this.idiomArray[[e,h]]=o,o.pos.y=h}}}else if(i<0)for(var c=8;c>=0;c--)for(var l=8;l>=0;l--)if(this.idiomArray[[l,c]]){var y=this.idiomArray[[l,c]];if("x"==t){var m=l-i;this.idiomArray[[l,c]]=null,this.idiomArray[[m,c]]=y,y.pos.x=m}else if("y"==t){var d=c-i;this.idiomArray[[l,c]]=null,this.idiomArray[[l,d]]=y,y.pos.y=d}}},returnHeadWord:function(i){for(var r=0;r<this.idiom[1].length;r++){if(i==this.idiom[1][r].word)return this.idiom[1][r]}},refreshBoard:function(){for(var i=0;i<9;i++)for(var r=0;r<9;r++)if(this.idiomArray[[r,i]]){var t=this.idiomArray[[r,i]];t.pos.x==r&&t.pos.y==i&&this.blockArray[[r,i]].getComponent("BlockSpritePrefab").setWord({wordName:t.str})}else this.blockArray[[r,i]].getComponent("BlockSpritePrefab").setWord({wordName:""})},clickBtn:function(i,r){"start"==r?this.startBuild():"prelevel"==r?(this.setlevel>0&&this.setlevel--,this.idiomArray=this.idiomLevelJson[this.setlevel][0],this.refreshBoard(),this.levelLabel.string="\u7b2c"+(this.setlevel+1)+"\u5173"):"nextlevel"==r&&(this.setlevel<9&&this.setlevel++,this.idiomArray=this.idiomLevelJson[this.setlevel][0],this.refreshBoard(),this.levelLabel.string="\u7b2c"+(this.setlevel+1)+"\u5173")}}),cc._RF.pop()},{GameConfig:"GameConfig"}],MainScene:[function(i,r,t){"use strict";cc._RF.push(r,"3822dGbDBJNgrKf6sVycRyl","MainScene"),cc.Class({extends:cc.Component,properties:{},start:function(){}}),cc._RF.pop()},{}]},{},["BlockSpritePrefab","GameConfig","GameLayer","MainScene"]);